  <html>
    <head>
      <title>QtDcm Online Documentation</title>
      <!--<link HREF="doxygen.css" REL="stylesheet" TYPE="text/css">-->
      <link HREF="qtdcm_dox.css" REL="stylesheet" TYPE="text/css">
      <link HREF="tabs.css" REL="stylesheet" TYPE="text/css">
      <link rel="Shortcut Icon" type="image/x-icon" href="../qtdcm.ico" />
      </style>
    </head>
    <body>
    <div id="pageHeader">
      <h2><span>QtDcm: A Qt based C++ library for Dicom communication</span></h2>
      <a href="https://qtdcm.github.io"><div id="projectname"></div></a>
    </div>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Integrating <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> in a Qt application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The integration of <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> in a Qt application is very easy but you have to know how to configure it via <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a> which is in charge of the connections between the different widgets, dicom communications, dicom images downloads and image conversions (or command line tools).</p>
<p>Important note: for the moment, <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> can only be integrated in Qt based applications and more precisely QtWidgets based applications.</p>
<h1><a class="anchor" id="basic_section"></a>
Instanciating the objects</h1>
<p>In your application you have to first instanciate the widgets. Here we only show the case with the main <a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a> and the <a class="el" href="classQtDcmImportWidget.html">QtDcmImportWidget</a>, assuming "this" is the parent widget embedding those widgets. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcm.html">QtDcm</a> * mainWidget = <span class="keyword">new</span> <a class="code" href="classQtDcm.html">QtDcm</a>(<span class="keyword">this</span>);</div><div class="line"><a class="code" href="classQtDcmImportWidget.html">QtDcmImportWidget</a> * importWidget = <span class="keyword">new</span> <a class="code" href="classQtDcmImportWidget.html">QtDcmImportWidget</a>(<span class="keyword">this</span>);</div></div><!-- fragment --><p>Then you have to set the setting file. This file is stored in your personnal directory and if it doesn't exist it's created with default values. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmPreferences.html#ab00c3aea2ed4de4d3429ee6cc64ada61">QtDcmPreferences::instance</a>()-&gt;<a class="code" href="classQtDcmPreferences.html#af1bb354bf1599da098f7f2f4e2903019">setIniFile</a>(<span class="stringliteral">&quot;mySettings&quot;</span>);</div></div><!-- fragment --><p>Set the <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a> class the pointers to the main widgets (<a class="el" href="classQtDcm.html" title="This class contains the widget for managing Dicom data. ">QtDcm</a>, <a class="el" href="classQtDcmImportWidget.html">QtDcmImportWidget</a> for example). All the connexions are perfomed internally by <a class="el" href="classQtDcmManager.html" title="This class is in charge of the different process (dcm2nii), pacs query/retrieve (dcm4chee), temporary directory creation and removing, PACS server settings. ">QtDcmManager</a>.</p>
<div class="fragment"><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#af57aea1255a13738c63b2b396ea4f227">setQtDcmWidget</a>(mainWidget);</div><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#ae3f18fa9874b7b81c037a9d068d123a2">setImportWidget</a>(importWidget());</div></div><!-- fragment --><h1><a class="anchor" id="manager_conf_sec"></a>
QtDcmManager configuration options</h1>
<p>Depending on what you planned to do with this library, it's possible to set behaviour options to QtDcmManger. This behaviour mostly relies on the way dicom data are converted and where they are stored. First there's a mode that you can set if you want to control from the code where the converted data will be stored. See QtDcmManager::outputdirmode enum. If you choose <a class="el" href="classQtDcmManager.html#ac406664e5fadd3c5f18c3d053eb984dca03f393d8b3e4efb698051034ed4def36">QtDcmManager::DIALOG</a>, the output directory will be set using a QFileDialog. If you choose <a class="el" href="classQtDcmManager.html#ac406664e5fadd3c5f18c3d053eb984dca4e48ccd39a9a8b8a526c38f2ff8f3b43">QtDcmManager::CUSTOM</a>, you will have to set manually the output directory. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#aa221c81d113a8473962a45d1b77cff14">setOutputdirMode</a>(<a class="code" href="classQtDcmManager.html#ac406664e5fadd3c5f18c3d053eb984dca4e48ccd39a9a8b8a526c38f2ff8f3b43">QtDcmManager::CUSTOM</a>);</div><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;<a class="code" href="classQtDcmManager.html#a06f6f481d5bf3b9e2c330ce8d19986a5">setOutputDirectory</a>(myDirectory);</div><div class="line">...</div><div class="line"></div><div class="line">QtDcmManager::instance()-&gt;importSelectedSeries();</div></div><!-- fragment --><p>The other option is the choice of the provided converter : using a call to dcm2nii binary or using an ITK based conversion class. </p><div class="fragment"><div class="line"><a class="code" href="classQtDcmManager.html#ac7ce288e05918d85af9f295f2a7873a8">QtDcmManager::instance</a>()-&gt;setExternalUseConverter(<span class="keyword">true</span>);</div><div class="line">...</div><div class="line">or</div><div class="line">...</div><div class="line">QtDcmManager::instance()-&gt;setExternalUseConverter(<span class="keyword">false</span>);</div></div><!-- fragment --><h1><a class="anchor" id="setting_sec"></a>
Playing with the settings widgets</h1>
<p>There a lots of way to play with settings. By default, the settings are used to configure dicom related stuff, like local dicom settings (AETitle, port, IP) or available dicom servers. There are also settings for the Dcm2nii conversion tool (if you want to use it).</p>
<h2><a class="anchor" id="easy_settings_subsec"></a>
The easiest way: calling the QtDcmPreferencesDialog class</h2>
<p>You just need to call the slot <a class="el" href="classQtDcm.html#a4c663c8dfbbd3cc77490e7eac7cf092b" title="Opens the PACS preferences dialog. ">QtDcm::editPreferences()</a> </p><div class="fragment"><div class="line"><a class="code" href="classQtDcm.html">QtDcm</a> * <a class="code" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> = <span class="keyword">new</span> <a class="code" href="classQtDcm.html">QtDcm</a>(<span class="keyword">this</span>);</div><div class="line">main-&gt;<a class="code" href="classQtDcm.html#a4c663c8dfbbd3cc77490e7eac7cf092b">editPreferences</a>();</div></div><!-- fragment --><h2><a class="anchor" id="embed_settings_subsec"></a>
Used the specific settings widgets</h2>
<p>These widgets are designed to be integrated in other applications/widgets, in fact you can just use them where you want, assuming the parent class is QWidget based. You just need to instanciate them and they will internally update the <a class="el" href="classQtDcmPreferences.html" title="Class that manages the settings of QtDcm. ">QtDcmPreferences</a> instance but the changes won't be written to the settings file. </p><div class="fragment"><div class="line">p_servers = <span class="keyword">new</span> <a class="code" href="classQtDcmServersDicomSettingsWidget.html">QtDcmServersDicomSettingsWidget</a>(<span class="keyword">this</span>); <span class="comment">// assuming p_servers is a member of the parent widget</span></div></div><!-- fragment --><p>In this way it's necessary to add somewhere in your application a way to store the settings, e.g a "Save" button connected to an onSaveClicked() slot. Here is the instanciation of the button and the signal/slot connection. </p><div class="fragment"><div class="line"><span class="comment">//instanciate a QPushButton</span></div><div class="line">QPushButton * save = <span class="keyword">new</span> QPushButton(<span class="keyword">this</span>);</div><div class="line">connect(save, &amp;QPushButton::clicked, </div><div class="line">        <span class="keyword">this</span>, &amp;MyParentWidget::onSaveClicked);</div></div><!-- fragment --><p>Here is the slot implementation: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyClass::onSaveClicked()</div><div class="line">{</div><div class="line">  m_servers-&gt;updatePreferences(); <span class="comment">// Updates preferences in memory</span></div><div class="line">  <a class="code" href="classQtDcmPreferences.html#ab00c3aea2ed4de4d3429ee6cc64ada61">QtDcmPreferences::instance</a>()-&gt;<a class="code" href="classQtDcmPreferences.html#aec128cc5ef96e66c8c7f2432c010a731">writeSettings</a>(); <span class="comment">// Effectively writes them to the settings file</span></div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->

<div style="text-align:right;padding:10px;">
</div>
</body>
</html>
